<main class="main">
  <div class="content">
      <div id="app">
        <!-- Top Header Bar -->
        <header class="app-header">
          <img src="assets/verizon-header.png" alt="Verizon Header" class="verizon-header-image">
        </header>

        <!-- Main Content Area -->
        <main class="app-main">
          <!-- Left Sidebar -->
          <div class="left-sidebar">
            <!-- Vehicle Filter Component -->
            <app-vehicle-filter
              (vehicleToggled)="onToggleVehicle($event)"
              (allVehiclesToggled)="onToggleAllVehicles()"
              (deselectAllClicked)="onDeselectAllVehicles()">
            </app-vehicle-filter>

            <div class="sidebar-section">
              <h3>Data Controls</h3>
              <div class="control-group">
                <label for="kpi-select">KPI:</label>
                <select
                  id="kpi-select"
                  class="form-select"
                  [value]="stateService.filters().kpi"
                  (change)="onKpiChange($any($event.target).value)"
                >
                  @for (option of kpiOptions(); track option.value) {
                  <option [value]="option.value">{{ option.label }}</option>
                  }
                </select>
              </div>
              <div class="control-group">
                <label for="aggregation-select">Aggregation:</label>
                <select
                  id="aggregation-select"
                  class="form-select"
                  [value]="stateService.filters().aggregation"
                  (change)="onAggregationChange($any($event.target).value)"
                >
                  @for (option of aggregationOptions(); track option.value) {
                  <option [value]="option.value">{{ option.label }}</option>
                  }
                </select>
              </div>
              <div class="control-group">
                <label for="resolution-select">H3 Resolution:</label>
                <select
                  id="resolution-select"
                  class="form-select"
                  [value]="stateService.currentResolution()"
                  (change)="onResolutionChange(+$any($event.target).value)"
                >
                  @for (option of resolutionOptions(); track option.value) {
                  <option
                    [value]="option.value"
                    [selected]="option.value === stateService.currentResolution()"
                  >{{ option.label }}</option>
                  }
                </select>
              </div>
              <button
                (click)="onLoadSampleData()"
                class="btn btn-primary full-width"
              >
                Load Sample Data
              </button>
            </div>
          </div>

          <!-- Central Map Area -->
          <div class="map-container">
            <app-map></app-map>

            <!-- Map Toolbar - positioned in top-right -->
            <div class="map-toolbar-container">
              <app-map-toolbar (toolbarAction)="onMapToolbarAction($event)"></app-map-toolbar>
            </div>

            <!-- Time Timeline - positioned in center-bottom -->
            <div class="time-timeline-container">
              <app-time-timeline (timeSelected)="onTimeSelected($event)"></app-time-timeline>
            </div>

            <!-- Title Widget - positioned in right side -->
            <div class="title-widget-container">
              <app-title-widget (optionToggled)="onWidgetOptionToggled($event)"></app-title-widget>
            </div>

            <!-- Legend Widget - positioned below title widget -->
            <div class="legend-widget-container">
              <app-legend-widget></app-legend-widget>
            </div>

            <!-- Map controls overlay -->
            <div class="map-controls">
              <div class="zoom-info">
                Zoom: <span id="current-zoom">{{ currentZoom() }}</span>
              </div>
              <div class="resolution-info">
                H3 Resolution:
                <span id="current-resolution">{{
                  stateService.currentResolution()
                }}</span>
              </div>
              <div class="hexagon-info">
                Hexagons: <span>{{ hexagonCount() }}</span>
              </div>
            </div>
          </div>
        </main>
      </div>
  </div>
</main>
