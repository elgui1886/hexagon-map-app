<main class="main">
  <div class="content">
      <div id="app">
        <!-- Top Header Bar -->
        <header class="app-header">
          <img src="assets/verizon-header.png" alt="Verizon Header" class="verizon-header-image">
        </header>

        <!-- Main Content Area -->
        <main class="app-main">
          <!-- Left Sidebar -->
          <aside class="left-sidebar">
            <div class="sidebar-section">
              <h3>View</h3>
              <div class="control-group">
                <label>Vehicles</label>
                <div class="vehicle-list">
                  <div class="vehicle-group">
                    <input
                      type="checkbox"
                      id="select-all"
                      [checked]="allVehiclesSelected()"
                      (change)="onToggleAllVehicles()"
                    />
                    <label for="select-all">Select All Vehicles</label>
                  </div>
                  @for (vehicle of vehicles(); track vehicle.id) {
                  <div class="vehicle-item">
                    <input
                      type="checkbox"
                      [id]="vehicle.id"
                      [checked]="vehicle.selected"
                      (change)="onToggleVehicle(vehicle.id)"
                    />
                    <span
                      class="vehicle-color"
                      [style.background]="vehicle.color"
                    ></span>
                    <label [for]="vehicle.id">{{ vehicle.name }}</label>
                  </div>
                  }
                </div>
              </div>
            </div>

            <div class="sidebar-section">
              <h3>Data Controls</h3>
              <div class="control-group">
                <label for="kpi-select">KPI:</label>
                <select
                  id="kpi-select"
                  class="form-select"
                  [value]="stateService.filters().kpi"
                  (change)="onKpiChange($any($event.target).value)"
                >
                  @for (option of kpiOptions(); track option.value) {
                  <option [value]="option.value">{{ option.label }}</option>
                  }
                </select>
              </div>
              <div class="control-group">
                <label for="aggregation-select">Aggregation:</label>
                <select
                  id="aggregation-select"
                  class="form-select"
                  [value]="stateService.filters().aggregation"
                  (change)="onAggregationChange($any($event.target).value)"
                >
                  @for (option of aggregationOptions(); track option.value) {
                  <option [value]="option.value">{{ option.label }}</option>
                  }
                </select>
              </div>
              <div class="control-group">
                <label for="resolution-select">H3 Resolution:</label>
                <select
                  id="resolution-select"
                  class="form-select"
                  [value]="stateService.currentResolution()"
                  (change)="onResolutionChange(+$any($event.target).value)"
                >
                  @for (option of resolutionOptions(); track option.value) {
                  <option [value]="option.value">{{ option.label }}</option>
                  }
                </select>
              </div>
              <button
                (click)="onLoadSampleData()"
                class="btn btn-primary full-width"
              >
                Load Sample Data
              </button>
            </div>
          </aside>

          <!-- Central Map Area -->
          <div class="map-container">
            <app-map></app-map>

            <!-- Map controls overlay -->
            <div class="map-controls">
              <div class="zoom-info">
                Zoom: <span id="current-zoom">{{ currentZoom() }}</span>
              </div>
              <div class="resolution-info">
                H3 Resolution:
                <span id="current-resolution">{{
                  stateService.currentResolution()
                }}</span>
              </div>
              <div class="hexagon-info">
                Hexagons: <span>{{ hexagonCount() }}</span>
              </div>
            </div>
          </div>
        </main>
      </div>
  </div>
</main>
